import{r as L,j as U,a as $,c as it,b as rt}from"./chunks/random.js";function at(a){const[i,g]=L.useState(null);return L.useEffect(()=>{if(!a||a.length===0){g([]);return}let M=!1;return Promise.all(a.map(u=>new Promise(w=>{const l=new Image;l.onload=()=>w({src:u,img:l,w:l.naturalWidth||64,h:l.naturalHeight||64,ratio:(l.naturalWidth||64)/(l.naturalHeight||64)}),l.onerror=()=>w({src:u,img:l,w:64,h:64,ratio:1}),l.src=u}))).then(u=>{M||g(u)}),()=>{M=!0}},[a]),i}function Q(a,i,g,M,u,w){for(let l=0;l<3;l++){for(let e=0;e<a.length;e++){const c=a[e];for(let n=e+1;n<a.length;n++){const m=a[n];if(c.isResting&&m.isResting)continue;const I=m.x-c.x,B=m.y-c.y,F=I*I+B*B,S=c.radius+m.radius+8;if(F<S*S&&F>.01){const y=Math.sqrt(F),o=S-y,d=I/y,r=B/y,s=o*.4;c.isResting||(c.x-=d*s,c.y-=r*s),m.isResting||(m.x+=d*s,m.y+=r*s)}}}for(const e of a){if(e.isResting)continue;e.x<e.radius+10&&(e.x=e.radius+10,e.vx<0&&(e.vx=-e.vx*.25)),e.x>i-e.radius-10&&(e.x=i-e.radius-10,e.vx>0&&(e.vx=-e.vx*.25)),g-e.radius-e.y<=2&&(e.y=g-e.radius,w||(e.vy>5?e.vy=-e.vy*.05:e.vy=0,e.vx*=.92),u&&!w&&Math.abs(e.vx)<3&&Math.abs(e.vy)<3&&(e.isResting=!0,e.vx=0,e.vy=0)),e.y<M+e.radius&&(e.y=M+e.radius,e.vy<0&&(e.vy=-e.vy*.05))}}}const ct=({sprites:a,count:i=35,zIndex:g=0,seed:M=1,sizeScale:u=1.25})=>{const w=L.useRef(null),l=at(a||[]),e=L.useRef({fruits:[],lastScrollY:0,scrollVelocity:0,vw:0,vh:0,initialized:!1});return L.useEffect(()=>{const c=w.current;if(!c)return;const n=e.current;let m=0,I=0;const B=()=>{const y=window.innerWidth,o=window.innerHeight,d=window.scrollY;n.vw=y,n.vh=o,n.lastScrollY=d;const r=it(M),s=[],x=d+o-10;for(let h=0;h<i;h++){const E=$(r,50,85)*u,b=E*.4;s.push({x:$(r,b+40,y-b-40),y:x-$(r,0,80),vx:0,vy:0,radius:b,size:E,rotation:0,spriteIndex:h%Math.max(1,a.length),mass:b*b,horizontalBias:(Math.random()-.5)*1.2,verticalBias:(Math.random()-.5)*1.2,chaosLevel:.4+Math.random()*.4,independenceTimer:Math.random()*5,isResting:!1})}const D=d;for(let h=0;h<40;h++)Q(s,y,x-5,D,!0,!1);s.forEach(h=>{h.vx=0,h.vy=0,h.isResting=!0}),n.fruits=s,n.initialized=!0},F=y=>{m=requestAnimationFrame(F);const o=Math.min(.02,(y-I)/1e3);if(I=y,o<=0)return;const d=window.innerWidth,r=window.innerHeight;(n.vw!==d||n.vh!==r||!n.initialized)&&B();const s=c.getContext("2d");if(!s)return;const R=window.devicePixelRatio||1;(c.width!==d*R||c.height!==r*R)&&(c.width=d*R,c.height=r*R,c.style.width=d+"px",c.style.height=r+"px",s.setTransform(R,0,0,R,0,0));const x=window.scrollY,D=x-n.lastScrollY;n.scrollVelocity=n.scrollVelocity*.12+D*.88,n.lastScrollY=x;const h=document.documentElement.scrollHeight,E=80,b=x+r,G=h-E;let V;G-b<=0?V=G:V=b-10;const X=x,H=1e3,{fruits:T}=n,k=n.scrollVelocity,j=.8,J=Math.abs(k)>=j,C=k<-j,Z=k>j;if(C)for(const t of T)t.isResting=!1;for(const t of T){t.independenceTimer+=o;const v=t.y-x,P=V-x-t.radius-v;if(Z){if(t.isResting=!1,t.vy+=H*o*1.5,t.vx+=t.horizontalBias*400*o*t.chaosLevel,t.vx+=(Math.random()-.5)*800*o,t.vy+=(Math.random()-.3)*400*o,Math.random()<.6){const p=(Math.random()-.5)*700*t.chaosLevel;t.vx+=p*o}if(Math.random()<.4*t.chaosLevel){const p=Math.random()*Math.PI*2+t.independenceTimer*1.5,Y=300+Math.random()*200;t.vx+=Math.cos(p)*Y*o,t.vy+=Math.sin(p)*Y*o*.4}}else if(C){const p=v>=0&&v<=r,Y=v>r*.2&&v<=r,W=Math.abs(P),K=r*.7,tt=W<=K,et=W<=50;if((tt||Y)&&p){let f;et?f=1:Y?f=.7+Math.random()*.15:f=1-Math.min(1,W/K)*.6;const z=500+Math.random()*350,st=1+f*1.2;t.vy-=z*st*o*1.2;const nt=(Math.random()-.5)*500;if(t.vx+=nt*o,Math.random()<.6){const N=Math.random()*Math.PI*.6-Math.PI*.8,O=400+Math.random()*300;t.vx+=Math.cos(N)*O*o,t.vy+=Math.sin(N)*O*o}}else{const f=300+Math.random()*200;t.vy-=f*o*1.3}t.vy-=H*o*.8,t.vx+=t.horizontalBias*250*o*t.chaosLevel,t.vy+=t.verticalBias*150*o*t.chaosLevel;const ot=(Math.random()-.5)*450;if(t.vx+=ot*o*t.chaosLevel,t.vy+=(Math.random()-.85)*180*o,Math.random()<.25*t.chaosLevel){const f=Math.random()*Math.PI*.8-Math.PI*.65,z=220+Math.random()*180;t.vx+=Math.cos(f)*z*o,t.vy+=Math.sin(f)*z*o}if(Math.random()<.2){const f=Math.random()*Math.PI*2,z=130+Math.random()*130;t.vx+=Math.cos(f)*z*o,t.vy+=Math.sin(f)*z*o*.4}}else if(t.isResting){t.vx=0,t.vy=0;continue}else P<=5?Math.abs(t.vx)<5&&Math.abs(t.vy)<5?(t.vx=0,t.vy=0,t.isResting=!0):(t.vx*=.85,t.vy*=.85):(t.vy+=H*o*.6,t.vx*=.994,t.vy*=.996)}for(const t of T){if(t.isResting){t.vx=0,t.vy=0;continue}J?(t.x+=t.vx*o,t.y+=t.vy*o,t.vx*=.992,t.vy*=.996):(t.x+=t.vx*o,t.y+=t.vy*o)}Q(T,d,V,X,!J,C),s.clearRect(0,0,d,r);const A=l,_=[...T].sort((t,v)=>t.y-v.y);for(const t of _){const v=t.y-x;if(!(v<-t.size||v>r+t.size))if(s.globalAlpha=.95,A&&A.length>0){const q=A[t.spriteIndex%A.length],P=t.size,p=t.size/q.ratio;s.save(),s.translate(t.x,v),s.drawImage(q.img,-P/2,-p/2,P,p),s.restore()}else s.beginPath(),s.arc(t.x,v,t.radius,0,Math.PI*2),s.fillStyle=`hsl(${t.spriteIndex*40}, 70%, 55%)`,s.fill()}s.globalAlpha=1};B(),m=requestAnimationFrame(F);const S=()=>{n.initialized=!1};return window.addEventListener("resize",S),()=>{cancelAnimationFrame(m),window.removeEventListener("resize",S)}},[l,i,M,u,a.length]),U.jsx("canvas",{ref:w,className:"fv-bg",style:{"--z":String(g??-1)}})};function lt(){const a="fv-bg-root";let i=document.getElementById(a);if(i)return;i=document.createElement("div"),i.id=a;const g=document.body.firstChild;g?document.body.insertBefore(i,g):document.body.appendChild(i),i.style.position="fixed",i.style.inset="0",i.style.zIndex="-1",i.style.pointerEvents="none",rt(i).render(U.jsx(ct,{sprites:["/img/sprites/biber.png","/img/sprites/brokoli.png","/img/sprites/cilek.png","/img/sprites/dolmabiber.png","/img/sprites/domates.png","/img/sprites/kiraz.png","/img/sprites/kivi.png","/img/sprites/muz.png","/img/sprites/portakal.png"],count:120,zIndex:-1,sizeScale:.65,seed:42}))}lt();
